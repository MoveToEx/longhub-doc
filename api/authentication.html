<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>Authentication | LONG Doc</title><meta name="description" content="How to prove your identity">
    <link rel="stylesheet" href="/assets/css/styles.daf57b9f.css">
    <link rel="preload" href="/assets/js/runtime~app.c677c2dd.js" as="script"><link rel="preload" href="/assets/css/styles.daf57b9f.css" as="style"><link rel="preload" href="/assets/js/884.f2099300.js" as="script"><link rel="preload" href="/assets/js/app.bcba7715.js" as="script">
    <link rel="prefetch" href="/assets/js/post.html.4b746d8b.js" as="script"><link rel="prefetch" href="/assets/js/account.html.f27cbb8a.js" as="script"><link rel="prefetch" href="/assets/js/schema.html.2202d97a.js" as="script"><link rel="prefetch" href="/assets/js/index.html.7c5c43c5.js" as="script"><link rel="prefetch" href="/assets/js/authentication.html.ed408746.js" as="script"><link rel="prefetch" href="/assets/js/metadata.html.e2df3d8a.js" as="script"><link rel="prefetch" href="/assets/js/template.html.210f3c29.js" as="script"><link rel="prefetch" href="/assets/js/tags.html.20277dd1.js" as="script"><link rel="prefetch" href="/assets/js/uploading.html.7cb27715.js" as="script"><link rel="prefetch" href="/assets/js/searching.html.bc7d52e8.js" as="script"><link rel="prefetch" href="/assets/js/404.html.c0fa8a3f.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="site-name can-hide" aria-hidden="true">LONG Doc</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/" aria-label="LONG Doc"><!--[--><!--[--><!--]--> LONG Doc <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/guide/searching.html" aria-label="Searching"><!--[--><!--[--><!--]--> Searching <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/guide/uploading.html" aria-label="Uploading"><!--[--><!--[--><!--]--> Uploading <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/guide/metadata.html" aria-label="Metadata"><!--[--><!--[--><!--]--> Metadata <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="route-link" href="/faq/" aria-label="FAQ"><!--[--><!--[--><!--]--> FAQ <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="API"><span class="title">API</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="API"><span class="title">API</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Basic</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/api/schema.html" aria-label="Schema"><!--[--><!--[--><!--]--> Schema <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link route-link-active" href="/api/authentication.html" aria-label="Authentication"><!--[--><!--[--><!--]--> Authentication <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Endpoint</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/api/post.html" aria-label="Post"><!--[--><!--[--><!--]--> Post <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/api/tags.html" aria-label="Tags"><!--[--><!--[--><!--]--> Tags <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/api/account.html" aria-label="Account"><!--[--><!--[--><!--]--> Account <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/" aria-label="LONG Doc"><!--[--><!--[--><!--]--> LONG Doc <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/guide/searching.html" aria-label="Searching"><!--[--><!--[--><!--]--> Searching <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/guide/uploading.html" aria-label="Uploading"><!--[--><!--[--><!--]--> Uploading <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/guide/metadata.html" aria-label="Metadata"><!--[--><!--[--><!--]--> Metadata <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="route-link" href="/faq/" aria-label="FAQ"><!--[--><!--[--><!--]--> FAQ <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="API"><span class="title">API</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="API"><span class="title">API</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Basic</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/api/schema.html" aria-label="Schema"><!--[--><!--[--><!--]--> Schema <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link route-link-active" href="/api/authentication.html" aria-label="Authentication"><!--[--><!--[--><!--]--> Authentication <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Endpoint</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/api/post.html" aria-label="Post"><!--[--><!--[--><!--]--> Post <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/api/tags.html" aria-label="Tags"><!--[--><!--[--><!--]--> Tags <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/api/account.html" aria-label="Account"><!--[--><!--[--><!--]--> Account <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Authentication <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#access-key" aria-label="Access key"><!--[--><!--[--><!--]--> Access key <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#cookies" aria-label="Cookies"><!--[--><!--[--><!--]--> Cookies <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Endpoints do not require authentication unless explicitly specified.</p></div><h1 id="authentication" tabindex="-1"><a class="header-anchor" href="#authentication"><span>Authentication</span></a></h1><p>There are two ways to authenticate on LONG Hub: Access key and login session.</p><p>If you are accessing an endpoint that requires authentication but no valid credential is available (i.e. you are not logged in and your access key is invalid), the server will respond with <code>401 Unauthorized</code>.<br> If your credential is valid, but the associated account doesn&#39;t have permission required by the operation, the server will respond with <code>403 Forbidden</code>.</p><h2 id="access-key" tabindex="-1"><a class="header-anchor" href="#access-key"><span>Access key</span></a></h2><p>Access key is a randomly generated string consisting of only letters, digits, and underlines, and can be used to authenticate user.</p><p>You can view your access key on account page.<br> When making requests, add <code>X-Access-Key</code> in request header to authenticate.</p><p>For example:</p><div class="language-http line-numbers-mode" data-ext="http" data-title="http"><pre class="language-http"><code>PUT /api/post/[id]
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">application/json</span></span>
<span class="token header"><span class="token header-name keyword">X-Access-Key</span><span class="token punctuation">:</span> <span class="token header-value">&lt;KEY&gt;</span></span>
<span class="token application-json">
...
</span></code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>or with <a href="https://www.python.org/" target="_blank" rel="noopener noreferrer">Python<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>:</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="language-python"><code><span class="token keyword">from</span> aiohttp <span class="token keyword">import</span> ClientSession
<span class="token keyword">from</span> asyncio <span class="token keyword">import</span> run

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> ClientSession<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> session<span class="token punctuation">:</span>
        <span class="token keyword">async</span> <span class="token keyword">with</span> session<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;https://longhub.top/api/account&#39;</span><span class="token punctuation">,</span> headers<span class="token operator">=</span><span class="token punctuation">{</span>
            <span class="token string">&#39;X-Access-Key&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;&lt;KEY&gt;&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> response<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token keyword">await</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>With invalid access key, the server responds with a <code>401 Unauthorized</code>.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Treat your access key as you would do to your password.<br> If you encounter a compromise, reset your access key on your account page or use the <a class="route-link" href="/api/account.html#get-api-account-reset-key"><code>GET /api/account/reset-key</code></a> endpoint. This will immediately invalidate your current access key.</p></div><h2 id="cookies" tabindex="-1"><a class="header-anchor" href="#cookies"><span>Cookies</span></a></h2><p>LONG Hub stores session data in a cookie named <code>nmsl_cookie</code>.</p><p>Sessions on LONG Hub are stateless, which means sessions cannot be manipulated by the server if not in request context. All the session data is encrypted, signed, and saved to the cookie named <code>nmsl_cookie</code>.<br> To log out, simply clear the cookie named <code>nmsl_cookie</code>.</p><p>The <a class="route-link" href="/api/account.html#post-api-account-login"><code>POST</code> /api/account/login</a> endpoint will leave session data in <code>nmsl_cookie</code> if the credential is valid.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 39954725+MoveToEx@users.noreply.github.com">MoveToEx</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.c677c2dd.js" defer></script><script src="/assets/js/884.f2099300.js" defer></script><script src="/assets/js/app.bcba7715.js" defer></script>
  </body>
</html>
